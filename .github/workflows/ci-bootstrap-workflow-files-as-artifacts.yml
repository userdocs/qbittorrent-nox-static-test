name: ci - bootstrap workflow files as artifacts

on:
  workflow_call:
    inputs:
      distinct_id:
        description: "Distinct id"
        required: false
        type: string

jobs:
  bootstrap-workflow-artifacts:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ${{ inputs.distinct_id }}
        uses: actions/checkout@v4

      - name: Install jq ${{ inputs.distinct_id }}
        run: |
          sudo apt-get update
          sudo apt-get install jq -y

      - name: Download Assets ${{ inputs.distinct_id }}
        run: |
          mapfile -t assets < <(curl -sL "https://api.github.com/repos/userdocs/qbt-workflow-files/releases/latest" | jq -r ".assets | .[].browser_download_url")
          for urls in "${assets[@]}"; do
              curl -sLO "${urls}"
          done

      - name: Upload Artifacts ${{ inputs.distinct_id }}
        uses: actions/upload-artifact@v4
        with:
          path: "*.tar.xz"
